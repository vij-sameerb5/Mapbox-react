{"ast":null,"code":"var _jsxFileName = \"/Users/sameershaik/Desktop/mapbox-react/src/mapbox-gl/MapboxGl.js\",\n  _s = $RefreshSig$();\n// src/mapbox-gl/MapboxGl.js\nimport React, { useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport '../App.css';\n\n// Ensure your token is set in .env: REACT_APP_MAPBOX_TOKEN\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\nexport default function MapboxGl() {\n  _s();\n  const mapContainerRef = useRef(null);\n  const mapRef = useRef(null);\n  const popupRef = useRef(new mapboxgl.Popup({\n    closeButton: false,\n    closeOnClick: true\n  }));\n  const animationRef = useRef(null);\n  const spinEnabledRef = useRef(true);\n  useEffect(() => {\n    // Initialize the map\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'mapbox://styles/mapbox/satellite-v9',\n      projection: 'globe',\n      center: [0, 20],\n      zoom: 1.5,\n      antialias: true\n    });\n    mapRef.current = map;\n    map.on('style.load', () => {\n      map.setFog({});\n      // Fetch earthquakes (past 30 days, M ≥ 5)\n      const past30 = new Date(Date.now() - 30 * 24 * 3600 * 1000).toISOString().split('T')[0];\n      fetch(`https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=${past30}&minmagnitude=5`).then(res => res.json()).then(data => {\n        map.addSource('earthquakes', {\n          type: 'geojson',\n          data\n        });\n        map.addLayer({\n          id: 'quake-circles',\n          type: 'circle',\n          source: 'earthquakes',\n          paint: {\n            'circle-radius': ['interpolate', ['linear'], ['get', 'mag'], 5, 6, 8, 12, 10, 20],\n            'circle-color': '#E55E5E',\n            'circle-stroke-color': '#FFF',\n            'circle-stroke-width': 1,\n            'circle-opacity': 0.8\n          }\n        });\n        map.on('click', 'quake-circles', e => {\n          const {\n            place,\n            mag,\n            time\n          } = e.features[0].properties;\n          const date = new Date(time).toLocaleString();\n          popupRef.current.setLngLat(e.lngLat).setHTML(`<strong>${place}</strong><br/>Mag: ${mag.toFixed(1)}<br/>${date}`).addTo(map);\n        });\n        map.on('mouseenter', 'quake-circles', () => map.getCanvas().style.cursor = 'pointer');\n        map.on('mouseleave', 'quake-circles', () => map.getCanvas().style.cursor = '');\n      }).catch(err => console.error('USGS fetch error:', err));\n\n      // Start rotation\n      startSpin();\n    });\n\n    // Cleanup on unmount\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current);\n      map.remove();\n    };\n  }, []);\n  function startSpin() {\n    const map = mapRef.current;\n    const animate = () => {\n      if (!spinEnabledRef.current) return;\n      const center = map.getCenter();\n      const speed = 0.05; // degrees per frame (~3°/sec at 60fps)\n      const newLng = center.lng - speed;\n      map.jumpTo({\n        center: [newLng, center.lat]\n      });\n      animationRef.current = requestAnimationFrame(animate);\n    };\n    animate();\n  }\n  function toggleSpin() {\n    spinEnabledRef.current = !spinEnabledRef.current;\n    if (spinEnabledRef.current) {\n      startSpin();\n    } else if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainerRef,\n      id: \"map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"btn-spin\",\n      onClick: toggleSpin,\n      children: spinEnabledRef.current ? 'Pause rotation' : 'Start rotation'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(MapboxGl, \"3cbieN7Xm50K7tXrlMzATqLbfsY=\");\n_c = MapboxGl;\nvar _c;\n$RefreshReg$(_c, \"MapboxGl\");","map":{"version":3,"names":["React","useEffect","useRef","mapboxgl","jsxDEV","_jsxDEV","Fragment","_Fragment","accessToken","process","env","REACT_APP_MAPBOX_TOKEN","MapboxGl","_s","mapContainerRef","mapRef","popupRef","Popup","closeButton","closeOnClick","animationRef","spinEnabledRef","map","Map","container","current","style","projection","center","zoom","antialias","on","setFog","past30","Date","now","toISOString","split","fetch","then","res","json","data","addSource","type","addLayer","id","source","paint","e","place","mag","time","features","properties","date","toLocaleString","setLngLat","lngLat","setHTML","toFixed","addTo","getCanvas","cursor","catch","err","console","error","startSpin","cancelAnimationFrame","remove","animate","getCenter","speed","newLng","lng","jumpTo","lat","requestAnimationFrame","toggleSpin","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/sameershaik/Desktop/mapbox-react/src/mapbox-gl/MapboxGl.js"],"sourcesContent":["// src/mapbox-gl/MapboxGl.js\nimport React, { useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport '../App.css';\n\n// Ensure your token is set in .env: REACT_APP_MAPBOX_TOKEN\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\n\nexport default function MapboxGl() {\n  const mapContainerRef = useRef(null);\n  const mapRef = useRef(null);\n  const popupRef = useRef(new mapboxgl.Popup({ closeButton: false, closeOnClick: true }));\n  const animationRef = useRef(null);\n  const spinEnabledRef = useRef(true);\n\n  useEffect(() => {\n    // Initialize the map\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'mapbox://styles/mapbox/satellite-v9',\n      projection: 'globe',\n      center: [0, 20],\n      zoom: 1.5,\n      antialias: true,\n    });\n    mapRef.current = map;\n\n    map.on('style.load', () => {\n      map.setFog({});\n      // Fetch earthquakes (past 30 days, M ≥ 5)\n      const past30 = new Date(Date.now() - 30 * 24 * 3600 * 1000)\n        .toISOString()\n        .split('T')[0];\n      fetch(\n        `https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=${past30}&minmagnitude=5`\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          map.addSource('earthquakes', { type: 'geojson', data });\n          map.addLayer({\n            id: 'quake-circles',\n            type: 'circle',\n            source: 'earthquakes',\n            paint: {\n              'circle-radius': [\n                'interpolate',\n                ['linear'],\n                ['get', 'mag'],\n                5,\n                6,\n                8,\n                12,\n                10,\n                20,\n              ],\n              'circle-color': '#E55E5E',\n              'circle-stroke-color': '#FFF',\n              'circle-stroke-width': 1,\n              'circle-opacity': 0.8,\n            },\n          });\n          map.on('click', 'quake-circles', (e) => {\n            const { place, mag, time } = e.features[0].properties;\n            const date = new Date(time).toLocaleString();\n            popupRef.current\n              .setLngLat(e.lngLat)\n              .setHTML(\n                `<strong>${place}</strong><br/>Mag: ${mag.toFixed(1)}<br/>${date}`\n              )\n              .addTo(map);\n          });\n          map.on('mouseenter', 'quake-circles', () =>\n            map.getCanvas().style.cursor = 'pointer'\n          );\n          map.on('mouseleave', 'quake-circles', () =>\n            map.getCanvas().style.cursor = ''\n          );\n        })\n        .catch((err) => console.error('USGS fetch error:', err));\n\n      // Start rotation\n      startSpin();\n    });\n\n    // Cleanup on unmount\n    return () => {\n      if (animationRef.current) cancelAnimationFrame(animationRef.current);\n      map.remove();\n    };\n  }, []);\n\n  function startSpin() {\n    const map = mapRef.current;\n    const animate = () => {\n      if (!spinEnabledRef.current) return;\n      const center = map.getCenter();\n      const speed = 0.05; // degrees per frame (~3°/sec at 60fps)\n      const newLng = center.lng - speed;\n      map.jumpTo({ center: [newLng, center.lat] });\n      animationRef.current = requestAnimationFrame(animate);\n    };\n    animate();\n  }\n\n  function toggleSpin() {\n    spinEnabledRef.current = !spinEnabledRef.current;\n    if (spinEnabledRef.current) {\n      startSpin();\n    } else if (animationRef.current) {\n      cancelAnimationFrame(animationRef.current);\n    }\n  }\n\n  return (\n    <>\n      <div ref={mapContainerRef} id=\"map\" />\n      <button id=\"btn-spin\" onClick={toggleSpin}>\n        {spinEnabledRef.current ? 'Pause rotation' : 'Start rotation'}\n      </button>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}