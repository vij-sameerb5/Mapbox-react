{"ast":null,"code":"var _jsxFileName = \"/Users/sameershaik/Desktop/mapbox-react/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './App.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\nfunction App() {\n  _s();\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n  const popupRef = useRef(new mapboxgl.Popup({\n    closeButton: false,\n    closeOnClick: true\n  }));\n  useEffect(() => {\n    // 1. initialize map\n    mapRef.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/standard-satellite',\n      zoom: 1.5,\n      center: [-90, 40],\n      projection: 'globe',\n      antialias: true\n    });\n    const map = mapRef.current;\n    map.on('style.load', () => {\n      // enable atmosphere\n      map.setFog({});\n\n      // 2. fetch past-30-day, M ≥ 5 earthquakes\n      const past30 = new Date(Date.now() - 30 * 24 * 3600 * 1000).toISOString().split('T')[0];\n      fetch(`https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=${past30}&minmagnitude=5`).then(res => res.json()).then(data => {\n        // 3. add source\n        map.addSource('earthquakes', {\n          type: 'geojson',\n          data\n        });\n\n        // 4. add circle layer (radius ∝ magnitude)\n        map.addLayer({\n          id: 'quake-circles',\n          type: 'circle',\n          source: 'earthquakes',\n          paint: {\n            'circle-radius': ['interpolate', ['linear'], ['get', 'mag'], 5, 6, 8, 12, 10, 20],\n            'circle-color': '#E55E5E',\n            'circle-stroke-color': '#FFF',\n            'circle-stroke-width': 1,\n            'circle-opacity': 0.8\n          }\n        });\n\n        // 5. popups\n        map.on('click', 'quake-circles', ev => {\n          const {\n            place,\n            mag,\n            time\n          } = ev.features[0].properties;\n          const date = new Date(time).toLocaleString();\n          popupRef.current.setLngLat(ev.lngLat).setHTML(`<strong>${place}</strong><br/>Mag: ${mag.toFixed(1)}<br/>${date}`).addTo(map);\n        });\n        map.on('mouseenter', 'quake-circles', () => map.getCanvas().style.cursor = 'pointer');\n        map.on('mouseleave', 'quake-circles', () => map.getCanvas().style.cursor = '');\n      }).catch(err => console.error('USGS fetch error:', err));\n\n      // 6. start spinning\n      initSpin(map);\n    });\n\n    // cleanup\n    return () => {\n      if (mapRef.current) mapRef.current.remove();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      id: \"map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"btn-spin\",\n      children: \"Pause rotation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n// spin logic\n_s(App, \"F8XNVZ40lxi7ZHZyAWVVXQMsoEw=\");\n_c = App;\nfunction initSpin(map) {\n  const secondsPerRevolution = 120;\n  const maxSpinZoom = 5;\n  const slowSpinZoom = 3;\n  let userInteracting = false;\n  let spinEnabled = true;\n  function spinGlobe() {\n    const zoom = map.getZoom();\n    if (!spinEnabled || userInteracting || zoom >= maxSpinZoom) return;\n    let speed = 360 / secondsPerRevolution;\n    if (zoom > slowSpinZoom) {\n      speed *= (maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);\n    }\n    const center = map.getCenter();\n    center.lng -= speed;\n    map.easeTo({\n      center,\n      duration: 1000,\n      easing: t => t\n    });\n  }\n  ;\n  ['mousedown', 'dragstart', 'zoomstart', 'rotatestart', 'pitchstart'].forEach(e => map.on(e, () => userInteracting = true));\n  ;\n  ['mouseup', 'dragend', 'zoomend', 'rotateend', 'pitchend'].forEach(e => map.on(e, () => {\n    userInteracting = false;\n    spinGlobe();\n  }));\n  map.on('moveend', spinGlobe);\n  document.getElementById('btn-spin').addEventListener('click', evt => {\n    spinEnabled = !spinEnabled;\n    if (spinEnabled) {\n      spinGlobe();\n      evt.target.textContent = 'Pause rotation';\n    } else {\n      map.stop();\n      evt.target.textContent = 'Start rotation';\n    }\n  });\n  spinGlobe();\n}\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","mapboxgl","jsxDEV","_jsxDEV","Fragment","_Fragment","accessToken","process","env","REACT_APP_MAPBOX_TOKEN","App","_s","mapContainer","mapRef","popupRef","Popup","closeButton","closeOnClick","current","Map","container","style","zoom","center","projection","antialias","map","on","setFog","past30","Date","now","toISOString","split","fetch","then","res","json","data","addSource","type","addLayer","id","source","paint","ev","place","mag","time","features","properties","date","toLocaleString","setLngLat","lngLat","setHTML","toFixed","addTo","getCanvas","cursor","catch","err","console","error","initSpin","remove","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","secondsPerRevolution","maxSpinZoom","slowSpinZoom","userInteracting","spinEnabled","spinGlobe","getZoom","speed","getCenter","lng","easeTo","duration","easing","t","forEach","e","document","getElementById","addEventListener","evt","target","textContent","stop","$RefreshReg$"],"sources":["/Users/sameershaik/Desktop/mapbox-react/src/App.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './App.css';\n\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\n\nfunction App() {\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n  const popupRef = useRef(\n    new mapboxgl.Popup({ closeButton: false, closeOnClick: true })\n  );\n\n  useEffect(() => {\n    // 1. initialize map\n    mapRef.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/standard-satellite',\n      zoom: 1.5,\n      center: [-90, 40],\n      projection: 'globe',\n      antialias: true,\n    });\n\n    const map = mapRef.current;\n\n    map.on('style.load', () => {\n      // enable atmosphere\n      map.setFog({});\n\n      // 2. fetch past-30-day, M ≥ 5 earthquakes\n      const past30 = new Date(Date.now() - 30 * 24 * 3600 * 1000)\n        .toISOString()\n        .split('T')[0];\n\n      fetch(\n        `https://earthquake.usgs.gov/fdsnws/event/1/query?format=geojson&starttime=${past30}&minmagnitude=5`\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          // 3. add source\n          map.addSource('earthquakes', {\n            type: 'geojson',\n            data,\n          });\n\n          // 4. add circle layer (radius ∝ magnitude)\n          map.addLayer({\n            id: 'quake-circles',\n            type: 'circle',\n            source: 'earthquakes',\n            paint: {\n              'circle-radius': [\n                'interpolate',\n                ['linear'],\n                ['get', 'mag'],\n                5, 6,\n                8, 12,\n                10, 20,\n              ],\n              'circle-color': '#E55E5E',\n              'circle-stroke-color': '#FFF',\n              'circle-stroke-width': 1,\n              'circle-opacity': 0.8,\n            },\n          });\n\n          // 5. popups\n          map.on('click', 'quake-circles', (ev) => {\n            const { place, mag, time } = ev.features[0].properties;\n            const date = new Date(time).toLocaleString();\n            popupRef.current\n              .setLngLat(ev.lngLat)\n              .setHTML(\n                `<strong>${place}</strong><br/>Mag: ${mag.toFixed(\n                  1\n                )}<br/>${date}`\n              )\n              .addTo(map);\n          });\n\n          map.on('mouseenter', 'quake-circles', () =>\n            map.getCanvas().style.cursor = 'pointer'\n          );\n          map.on('mouseleave', 'quake-circles', () =>\n            map.getCanvas().style.cursor = ''\n          );\n        })\n        .catch((err) => console.error('USGS fetch error:', err));\n\n      // 6. start spinning\n      initSpin(map);\n    });\n\n    // cleanup\n    return () => {\n      if (mapRef.current) mapRef.current.remove();\n    };\n  }, []);\n\n  return (\n    <>\n      <div ref={mapContainer} id=\"map\" />\n      <button id=\"btn-spin\">Pause rotation</button>\n    </>\n  );\n}\n\n// spin logic\nfunction initSpin(map) {\n  const secondsPerRevolution = 120;\n  const maxSpinZoom = 5;\n  const slowSpinZoom = 3;\n  let userInteracting = false;\n  let spinEnabled = true;\n\n  function spinGlobe() {\n    const zoom = map.getZoom();\n    if (!spinEnabled || userInteracting || zoom >= maxSpinZoom) return;\n    let speed = 360 / secondsPerRevolution;\n    if (zoom > slowSpinZoom) {\n      speed *= (maxSpinZoom - zoom) / (maxSpinZoom - slowSpinZoom);\n    }\n    const center = map.getCenter();\n    center.lng -= speed;\n    map.easeTo({ center, duration: 1000, easing: (t) => t });\n  }\n\n  ;[\n    'mousedown',\n    'dragstart',\n    'zoomstart',\n    'rotatestart',\n    'pitchstart',\n  ].forEach((e) => map.on(e, () => (userInteracting = true)));\n\n  ;[\n    'mouseup',\n    'dragend',\n    'zoomend',\n    'rotateend',\n    'pitchend',\n  ].forEach((e) =>\n    map.on(e, () => {\n      userInteracting = false;\n      spinGlobe();\n    })\n  );\n\n  map.on('moveend', spinGlobe);\n\n  document\n    .getElementById('btn-spin')\n    .addEventListener('click', (evt) => {\n      spinEnabled = !spinEnabled;\n      if (spinEnabled) {\n        spinGlobe();\n        evt.target.textContent = 'Pause rotation';\n      } else {\n        map.stop();\n        evt.target.textContent = 'Start rotation';\n      }\n    });\n\n  spinGlobe();\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}